<p id="notice"><%= notice %></p>

<h1><%= t('view.task_index') %></h1>
  <%= form_with url:'/tasks', method: :get, local: true do |f| %>
  <%= f.label :title, t('view.search_title') %>
  <%= f.text_field :title %>

  <%= f.label :status, t('view.search_status') %>
  <%= f.select :status, [['指定なし', ''], ['未着手', '未着手'], ['着手中', '着手中'],['完了', '完了']], include_blanc: '選択してください' %>
  <%= f.submit t('view.search_start') %> <%= link_to t('view.search_clear'), tasks_path %>
<% end %>
<table>
  <thead>
    <tr>
      <th><%= t('view.task_title') %></th>
      <th><%= t('view.task_content') %></th>
      <th><%= t('view.task_expired_at') %></th>
      <th><%= t('view.task_status') %></th>
      <th><%= t('view.task_priority') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td class="task_row"><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.expired_at %></td>
        <td><%= task.status %></td>
        <td><%= task.priority %></td>
        <td><%= link_to t('view.button_show'), task %></td>
        <td><%= link_to t('view.button_edit'), edit_task_path(task) %></td>
        <td><%= link_to t('view.button_destroy'), task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @tasks %>

<br>
<%= link_to t('view.button_expired_at_sort'), tasks_path(sort_expired: "true") %>
<%= link_to t('view.button_priority_sort'), tasks_path(sort_priority: "true") %>
<%= link_to t('view.button_create'), new_task_path %>
